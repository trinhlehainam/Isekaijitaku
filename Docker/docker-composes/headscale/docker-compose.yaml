# https://headscale.net/running-headscale-container/#configure-and-run-headscale
# NOTE: check config-example of current image version
# https://github.com/juanfont/headscale/blob/v0.22.3/config-example.yaml

services:
  headscale:
    container_name: headscale
    image: headscale/headscale:0.22.3
    restart: unless-stopped
    ports:
      - "127.0.0.1:8080:8080"
      - "127.0.0.1:9090:9090"
    volumes:
      - /path/to/config:/etc/headscale
      - /path/to/lib:/var/lib/headscale
      - /path/to/run:/var/run/headscale
    command: headscale serve
    networks:
      - nginx_network

  # NOTE: headscale-ui public domain needs to have the same domain with headscale 
  # add headscale public domain location path /web point headscale-ui container
  # https://github.com/gurucomputing/headscale-ui?tab=readme-ov-file#installation
  headscale-ui:
    container_name: headscale-ui
    image: ghcr.io/gurucomputing/headscale-ui:latest
    restart: unless-stopped
    ports:
      - "9443:443"
    networks:
      - nginx_network

networks:
  nginx_network:
    external: true
