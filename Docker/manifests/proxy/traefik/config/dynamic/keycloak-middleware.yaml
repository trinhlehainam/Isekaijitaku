
http:
  middlewares:
    rewrite-oauth2-proxy-local-location:
      plugin:
        rewriteHeaders:
          rewrites:
            - header: "Location"
              regex: "^http://(oauth2-proxy:4180|oauth2-proxy\\.yourdomain\\.local)(.*)$"
              replacement: "https://oauth2-proxy.yourdomain.local$2"
            # Handle URL-encoded format that might appear anywhere in the string
            # - header: "Location"
            #   regex: "(.*?)https%3A%2F%2Fkeycloak\\.yourdomain\\.local(.*?)"
            #   replacement: "${1}http%3A%2F%2Fkeycloak%3A8080${2}"