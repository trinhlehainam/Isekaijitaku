{
  // JSON Schema for Renovate
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  // Use local renovate-config as a base
  // Format: local>account/repo
  // https://docs.renovatebot.com/config-presets/#self-hosted-git
  extends: ["local>renovate_account/renovate-config"],
  // Enable dependency dashboard for visibility
  dependencyDashboard: true,
  // Only enable specific managers
  enabledManagers: [
    "github-actions",
    "dockerfile",
    "docker-compose",
    "custom.regex",
  ],
  // Enable automatic merging of PRs that pass tests
  automerge: true,
  // Skip tests for certain updates
  ignoreTests: true,
  
  // Custom manager for Ansible Jinja2 templates with Docker images
  customManagers: [
    {
      description: "Detects and updates Docker images in Ansible Jinja2 templates",
      customType: "regex", // explicitly set for clarity vs. jsonata
      datasourceTemplate: "docker",
      fileMatch: [
        // Standard Docker Compose patterns with Jinja2 extension
        // https://docs.renovatebot.com/modules/manager/docker-compose/#default-config
        "(^|/)(?:docker-)?compose[^/]*\\.ya?ml\\.j2$",
      ],
      matchStrings: [
        // https://github.com/renovatebot/renovate/issues/10993#issuecomment-2367518146
        "image:\\s*\"?(?<depName>[^\\s:@\"]+)(?::(?<currentValue>[-a-zA-Z0-9.]+))?(?:@(?<currentDigest>sha256:[a-zA-Z0-9]+))?\"?",
      ],
    }
  ],
  
  // Package-specific rules
  packageRules: [
    {
      description: "use fix scope for renovate updates",
      matchPackageNames: ["renovatebot/renovate"],
      semanticCommitType: "fix",
    },
    {
      description: "Automerge renovate updates",
      matchPackageNames: ["renovatebot/renovate"],
      matchUpdateTypes: ["minor", "patch", "digest"],
      automerge: true,
    },
    // Docker image rules
    {
      description: "Pin exact versions for database images",
      matchDatasources: ["docker"],
      matchPackageNames: ["postgres"],
      pinDigests: true,
    },
    {
      description: "Group Docker base image updates",
      matchDatasources: ["docker"],
      matchPackageNames: ["node", "nginx", "alpine"],
      groupName: "Docker base images",
      groupSlug: "docker-base",
    },
  ],
}